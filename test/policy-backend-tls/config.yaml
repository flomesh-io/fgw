resources:
- kind: Gateway
  metadata:
    name: test
  spec:
    listeners:
      - port: 8000
        protocol: HTTP

- kind: HTTPRoute
  spec:
    parentRefs:
      - kind: Gateway
        name: test
        port: 8000
    hostnames:
      - www.test.com
    rules:
      - backendRefs:
        - kind: Backend
          name: test-svc-1

- kind: HTTPRoute
  spec:
    parentRefs:
      - kind: Gateway
        name: test
        port: 8000
    hostnames:
      - www.fake.com
    rules:
      - backendRefs:
          - kind: Backend
            name: test-svc-2

- kind: Backend
  metadata:
    name: test-svc-1
  spec:
    targets:
      - address: localhost
        port: 8443

- kind: Backend
  metadata:
    name: test-svc-2
  spec:
    targets:
      - address: localhost
        port: 8443

- kind: BackendTLSPolicy
  spec:
    targetRefs:
      - kind: Backend
        name: test-svc-1
    validation:
      hostname: www.test.com
      caCertificates:
        - ca.crt: TestCA.crt

- kind: BackendTLSPolicy
  spec:
    targetRefs:
      - kind: Backend
        name: test-svc-2
    validation:
      hostname: www.fake.com
      caCertificates:
        - ca.crt: TestCA.crt

secrets:
  TestCA.crt: |
    -----BEGIN CERTIFICATE-----
    MIICqTCCAZECFA2spvYIOWiMGjmpSXhP1pekzz8rMA0GCSqGSIb3DQEBCwUAMBEx
    DzANBgNVBAMMBlRlc3RDQTAeFw0yNDA2MTMwNDU0NDNaFw0yNDA3MTMwNDU0NDNa
    MBExDzANBgNVBAMMBlRlc3RDQTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoC
    ggEBALLAl5GUj45J11GslJ98leKbTH58N024NcaF6i2OqXb5OA80LHPJf2cclf7E
    bL67kS54IIEoCEEP4kkiNZIPKAC1dA2NCsSlNv3WKcQ7SAwQx8zki4v32Lk2p/5z
    uEpRyYx6vNMf9Wj0WIsNVsXj5Tw//W/CW6tHbKqse9ZaJtQPw3aehxQrWtF7FNBR
    nBwJXlJZXlCyCtxf5vdd5PcPiA+u/Zm/mbT7vA9qNcx1wLAvlWkV1bIaI8L1mrsl
    i99iohPNlj0SE8reE0T6n/n2uV+E9Tlu33NQWEroeVue8qXFO4Grfe0bSetN/d0F
    wvumpHpmdGjS9xiziu4UM5drB9ECAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAVB7m
    7gjUSRMfzcMEY5cRc910M9k14EHnieNGlne0yRTSIvMAedIHXOjdM9F7v4HFA0Zy
    39azMZBEkrbvbdB89g4ltElEkHShfsZACivQawP1ygZFKzXqbpofCAQVpH1glJQd
    rF3OupRNEMNLIn/7q2M4WFupQF6RdMzxcQAcPmLjpeSgng+AJDrMFsVmZ3uA6SUk
    mPuzORND4VoHfvsBj1XgyrSnI0hBMNJKxSDGMJJA1JnHMDCgnWbrOlBAFVLIWHQf
    1EdwMHysuxh4lCW2KwhGrvziKGSD3AL6yPIMY0pYCPD7ekKsCiTuTiKTe5I/OP1W
    0TM/trMZO1UmXVacBQ==
    -----END CERTIFICATE-----
